<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Smart Parking</title>
    <meta name="description" content="Smart Parking - Find, book, and manage parking slots easily." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="assets/styles.css" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üÖøÔ∏è</text></svg>">
  </head>
  <body>
    <div class="app" id="appRoot">
      <header class="app-header">
        <div class="brand">
          <div class="brand-mark">üÖøÔ∏è</div>
          <div class="brand-text">
            <h1>Smart Parking</h1>
            <p class="tagline">Find it. Book it. Park smart.</p>
          </div>
        </div>

        <div class="header-actions">
          <div class="search">
            <input id="searchInput" type="text" placeholder="Search lots, areas, or slot IDs..." />
            <button id="searchClear" aria-label="Clear search">‚úï</button>
          </div>
          <span id="dbStatus" class="badge" title="Database connection status">DB: Offline</span>
          <button id="toggleTheme" class="icon-btn" aria-label="Toggle theme">üåô</button>
        </div>
      </header>

      <main class="content">
        <div id="dataStatusBar" class="data-status" aria-live="polite">
          <span id="dataStatusText">Loading data‚Ä¶</span>
        </div>
        <section class="stats" aria-label="Parking stats">
          <div class="stat-card">
            <div class="stat-top">
              <span class="stat-label">Total Slots</span>
              <span class="stat-icon">üÖøÔ∏è</span>
            </div>
            <div class="stat-value" id="statTotal">0</div>
            <div class="stat-sub" id="statLots">Across 0 lots</div>
          </div>
          <div class="stat-card">
            <div class="stat-top">
              <span class="stat-label">Available</span>
              <span class="stat-icon ok">‚úÖ</span>
            </div>
            <div class="stat-value" id="statAvailable">0</div>
            <div class="stat-sub">Ready to book</div>
          </div>
          <div class="stat-card">
            <div class="stat-top">
              <span class="stat-label">Occupied</span>
              <span class="stat-icon warn">‚õî</span>
            </div>
            <div class="stat-value" id="statOccupied">0</div>
            <div class="stat-sub">Currently in use</div>
          </div>
            <div class="stat-card">
              <div class="stat-top">
                <span class="stat-label">Revenue</span>
                <span class="stat-icon money">üí≥</span>
              </div>
              <div class="stat-value" id="statRevenue">‚Çπ0</div>
              <div class="stat-sub">Today</div>
            </div>
        </section>

        <section class="grid-section">
          <div class="grid-header">
            <h2>Slots</h2>
            <div class="grid-actions">
              <select id="filterLot" aria-label="Filter by parking lot">
                <option value="all">All Lots</option>
              </select>
              <select id="filterType" aria-label="Filter by vehicle type">
                <option value="all">All Types</option>
                <option value="car">Car</option>
                <option value="bike">Bike</option>
                <option value="ev">EV</option>
                <option value="accessible">Accessible</option>
              </select>
              <select id="filterStatus" aria-label="Filter by status">
                <option value="all">All Status</option>
                <option value="available">Available</option>
                <option value="occupied">Occupied</option>
                <option value="reserved">Reserved</option>
              </select>
              <button id="btnSync" class="btn">Sync</button>
              <button id="btnResetFilters" class="btn ghost">Reset</button>
            </div>
          </div>

          <div id="slotsGrid" class="slots-grid" role="grid" aria-label="Parking slots"></div>
        </section>

        <section class="map-section">
          <div class="map-card">
            <div class="map-header">
              <h2>Parking Map</h2>
              <div class="map-legend">
                <span class="badge available">Available</span>
                <span class="badge occupied">Occupied</span>
                <span class="badge reserved">Reserved</span>
                <span class="badge ev">EV</span>
                <span class="badge accessible">Accessible</span>
              </div>
            </div>
            <div class="map-placeholder" id="mapPlaceholder" aria-label="Parking map visualization">
              <div class="map-grid" id="mapGrid"></div>
            </div>
          </div>
        </section>

        <section class="updates-section">
          <div class="map-card">
            <div class="map-header">
              <h2>Recent Updates</h2>
              <div class="map-legend"><span class="badge">Live</span></div>
            </div>
            <div class="updates-list" id="updatesList" aria-live="polite"></div>
          </div>
        </section>

        <section class="updates-section">
          <div class="map-card">
            <div class="map-header">
              <h2>Live Bookings</h2>
              <div class="map-legend"><span class="badge">Auto-refresh</span></div>
            </div>
            <div class="bookings-list" id="bookingsList" aria-live="polite"></div>
          </div>
        </section>
      </main>

      <footer class="app-footer">
        <p>¬© <span id="year"></span> Smart Parking.</p>
        <div class="footer-links">
          <a href="https://github.com/" target="_blank" rel="noreferrer">GitHub</a>
          <a href="#" id="exportJson">Export Data</a>
        </div>
      </footer>

      <dialog id="bookingDialog" class="booking-dialog">
        <form method="dialog" class="booking-form" id="bookingForm">
          <header>
            <h3>Book Slot</h3>
            <button value="cancel" class="icon-btn" aria-label="Close">‚úï</button>
          </header>
          <div class="booking-body">
            <div class="summary">
              <div><strong>Slot:</strong> <span id="bkSlotId"></span></div>
              <div><strong>Lot:</strong> <span id="bkLot"></span></div>
              <div><strong>Type:</strong> <span id="bkType"></span></div>
              <div class="price"><strong>Rate:</strong> <span id="bkRate"></span>/hr</div>
            </div>
            <label>
              Vehicle Number
              <input id="bkVehicle" type="text" required placeholder="e.g., MH 12 AB 3456" />
            </label>
            <label>
              Duration (hours)
              <input id="bkHours" type="number" min="1" value="1" required />
            </label>
            <div class="total">
              <span>Total</span>
              <strong id="bkTotal">‚Çπ0</strong>
            </div>
          </div>
          <footer>
            <button value="cancel" class="btn ghost">Cancel</button>
            <button id="bkConfirm" value="default" class="btn primary">Confirm Booking</button>
          </footer>
        </form>
      </dialog>

      <dialog id="directionsDialog" class="directions-dialog">
        <div class="directions-content">
          <header>
            <h3>üìç Directions to Your Parking Slot</h3>
            <button class="icon-btn" id="closeDirections" aria-label="Close">‚úï</button>
          </header>
          <div class="directions-body">
            <div class="booking-summary" id="directionsSummary"></div>
            <div class="directions-map" style="margin-top: 12px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1);">
              <iframe id="directionsMap" title="Directions Map" width="100%" height="220" style="border:0;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <div class="directions-steps" id="directionsSteps"></div>
            <div class="directions-footer">
              <a id="googleMapsLink" target="_blank" rel="noopener noreferrer" class="btn primary">
                üó∫Ô∏è Open in Google Maps
              </a>
              <button id="btnProceedPayment" class="btn">üí≥ Pay Now</button>
              <button id="btnMarkParked" class="btn ghost">‚úîÔ∏è Mark as Parked</button>
            </div>
          </div>
        </div>
      </dialog>

      <dialog id="paymentDialog" class="booking-dialog">
        <form method="dialog" class="booking-form" id="paymentForm">
          <header>
            <h3>Complete Payment</h3>
            <button value="cancel" class="icon-btn" aria-label="Close">‚úï</button>
          </header>
          <div class="booking-body">
            <div class="summary">
              <div><strong>Booking:</strong> <span id="pmBookingId"></span></div>
              <div><strong>Slot:</strong> <span id="pmSlot"></span></div>
              <div><strong>Lot:</strong> <span id="pmLot"></span></div>
              <div class="price"><strong>Amount:</strong> <span id="pmAmount"></span></div>
            </div>
            <label>
              Payment Method
              <select id="pmMethod" required>
                <option value="card">Card</option>
                <option value="upi">UPI</option>
                <option value="wallet">Wallet</option>
              </select>
            </label>
            <label id="pmCardBlock">
              Card Number
              <input id="pmCard" type="text" inputmode="numeric" minlength="12" maxlength="19" placeholder="4111 1111 1111 1111" />
            </label>
            <div class="total">
              <span>Total to pay</span>
              <strong id="pmTotal">‚Çπ0</strong>
            </div>
          </div>
          <footer>
            <button value="cancel" class="btn ghost">Cancel</button>
            <button id="pmConfirm" value="default" class="btn primary">Pay</button>
          </footer>
        </form>
      </dialog>

      <dialog id="thankYouDialog" class="booking-dialog">
        <form method="dialog" class="booking-form" id="thankYouForm">
          <header>
            <h3>Thank you!</h3>
            <button value="cancel" class="icon-btn" aria-label="Close">‚úï</button>
          </header>
          <div class="booking-body">
            <div class="summary">
              <div><strong>Smart Parking</strong></div>
              <div>Your parking session is complete. Have a great day!</div>
            </div>
          </div>
          <footer>
            <button id="btnLogout" value="default" class="btn primary">Log out</button>
          </footer>
        </form>
      </dialog>
    </div>

    <script src="assets/app.js"></script>
  </body>
  </html>


